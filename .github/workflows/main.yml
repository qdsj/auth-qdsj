name: Main

on:
  push:
    branches: [main]

jobs:
  main:
    runs-on: ubuntu-latest
    environment: production
    steps:
      - name: Set Main Branch variables
        run: |
          echo "qdsjBranch=main" >> data.env
          echo "qdsjPort=3101" >> data.env
          echo "qdsjDockerName=authqdsj" >> data.env
          cat data.env
      - name: Upload artifact
        uses: actions/upload-artifact@v3
        with:
          name: dataEnv
          path: data.env
      - name: Download artifact
        uses: actions/download-artifact@v3
        with:
          name: 'dataEnv'
      - name: Load variables
        run: |
          source data.env
          echo "${qdsjBranch}"
          echo "${qdsjPort}"
          echo "${qdsjDockerName}"
